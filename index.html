---
layout: default
title: 首页
paginate: 5
---

{% assign features = site.features | default: site.config.features | default: nil %}
{% assign search_enabled = features and features.search %}
{% if paginator %}
  {% assign posts_collection = paginator.posts %}
{% else %}
  {% assign posts_collection = site.posts %}
{% endif %}
{% assign featured_posts = posts_collection | where_exp: 'p','p.pin == true' %}
{% assign latest_posts = posts_collection | where_exp: 'p','p.pin != true' %}
{% assign total_posts = site.posts | size %}
{% assign latest_post = site.posts | first %}
{% assign sorted_tags = site.tags | sort %}

<section class="hero">
  <div class="container hero-inner">
    <p class="hero-pill">持续更新 · 共 {{ total_posts }} 篇文章</p>
    <h1 class="hero-title" data-component="glitch-title" data-text="{{ site.title | escape }}">{{ site.title }}</h1>
    {% if site.subtitle %}<p class="subtitle">{{ site.subtitle }}</p>{% endif %}
    {% if site.description %}<p class="desc">{{ site.description }}</p>{% endif %}
    {% if latest_post %}
    <div class="hero-meta">
      <span class="hero-meta-label">最新更新</span>
      <a href="{{ latest_post.url | relative_url }}" class="hero-meta-link">{{ latest_post.title }} →</a>
    </div>
    {% endif %}
  </div>
</section>

<section class="site-section">
  <div class="container layout-grid">
    <section class="post-list">
      {% if featured_posts.size > 0 %}
      <div class="section-head">
        <h2 class="section-title">精选推荐</h2>
        <p class="section-desc">被置顶的文章值得你优先阅读，包含项目总结、实践指南与思考。</p>
      </div>
      <div class="featured-grid">
        {% for post in featured_posts %}
        <article class="card pinned" data-component="neon-border">
          <a class="card-cover" href="{{ post.url | relative_url }}">
            <img src="{{ post.cover | default: '/assets/img/cover.svg' | relative_url }}" alt="文章封面" loading="lazy" decoding="async" width="800" height="420"/>
          </a>
          <div class="card-body">
            <p class="meta">{{ post.date | date: "%Y-%m-%d" }} · {{ post.categories | join: " / " }}</p>
            <h3 class="card-title"><a href="{{ post.url | relative_url }}">{{ post.title }}</a></h3>
            <p class="excerpt">{{ post.summary | default: post.excerpt | strip_html | strip_newlines | truncate: 160 }}</p>
            {% if post.tags %}
            <div class="tag-row">
              {% for t in post.tags limit: 4 %}
                <span class="tag">{{ t }}</span>
              {% endfor %}
            </div>
            {% endif %}
          </div>
        </article>
        {% endfor %}
      </div>
      {% endif %}

      <div class="section-head">
        <h2 class="section-title">最新文章</h2>
        <p class="section-desc">最近发布的内容与灵感，欢迎订阅和回访。</p>
      </div>

      {% if latest_posts.size > 0 %}
      <div class="post-stream">
        {% for post in latest_posts %}
        <article class="post-stream-item">
          <div class="post-stream-meta">
            <time datetime="{{ post.date | date_to_xmlschema }}">{{ post.date | date: "%Y-%m-%d" }}</time>
            {% if post.categories and post.categories.size > 0 %}
              <span class="meta-dot" aria-hidden="true">•</span>
              <span class="post-stream-category">{{ post.categories | join: " / " }}</span>
            {% endif %}
          </div>
          <h3 class="post-stream-title">
            <a href="{{ post.url | relative_url }}">{{ post.title }}</a>
          </h3>
          <p class="post-stream-excerpt">{{ post.summary | default: post.excerpt | strip_html | strip_newlines | truncate: 200 }}</p>
          <div class="post-stream-footer">
            {% if post.tags %}
            <div class="post-stream-tags">
              {% for t in post.tags limit: 4 %}
                <span class="tag-chip">#{{ t }}</span>
              {% endfor %}
            </div>
            {% endif %}
            <a class="post-stream-link" href="{{ post.url | relative_url }}">阅读全文 →</a>
          </div>
        </article>
        {% endfor %}
      </div>
      {% else %}
        <p class="empty-hint">暂无文章，敬请期待新内容。</p>
      {% endif %}

      {% if paginator and paginator.total_pages > 1 %}
      <nav class="pagination" aria-label="文章分页">
        {% if paginator.previous_page %}
          <a class="btn" href="{{ paginator.previous_page_path | relative_url }}">上一页</a>
        {% endif %}
        <span class="pagination-info">第 {{ paginator.page }} / {{ paginator.total_pages }} 页</span>
        {% if paginator.next_page %}
          <a class="btn" href="{{ paginator.next_page_path | relative_url }}">下一页</a>
        {% endif %}
      </nav>
      {% endif %}
    </section>

    <aside class="sidebar">
      <section class="widget overview">
        <h3 class="widget-title">站点概览</h3>
        <ul class="overview-list">
          <li><span>文章</span><strong>{{ site.posts | size }}</strong></li>
          <li><span>标签</span><strong>{{ site.tags | size }}</strong></li>
          <li><span>最近更新</span><strong>{{ latest_post.date | date: "%Y-%m-%d" }}</strong></li>
        </ul>
      </section>

      {% if search_enabled %}
      <section class="widget">
        <h3 class="widget-title">站内搜索</h3>
        <button class="btn full" data-action="open-search">打开搜索（/）</button>
      </section>
      {% endif %}

      <section class="widget">
        <h3 class="widget-title">标签速览</h3>
        <div class="tag-rank">
          {% for tag in sorted_tags limit: 8 %}
            {% assign tag_name = tag[0] %}
            {% assign tag_count = tag[1].size %}
            <a class="tag-rank-item" href="{{ '/pages/tags/#' | append: tag_name | relative_url }}">
              <span class="tag-rank-name">#{{ tag_name }}</span>
              <span class="tag-rank-count">{{ tag_count }}</span>
            </a>
          {% endfor %}
        </div>
        <a class="widget-link" href="{{ '/pages/tags/' | relative_url }}">浏览全部标签 →</a>
      </section>

      <section class="widget">
        <h3 class="widget-title">快速入口</h3>
        <div class="widget-links">
          <a href="{{ '/pages/about/' | relative_url }}">关于本站</a>
          <a href="{{ '/pages/archives/' | relative_url }}">归档年表</a>
          <a href="{{ site.social.rss | relative_url | default: '/feed.xml' }}">RSS 订阅</a>
        </div>
      </section>
    </aside>
  </div>
</section>