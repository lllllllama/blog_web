{% assign features = site.config.features | default: {} %}
{% assign nav_items = site.nav | default: [] %}
<header class="site-header" role="banner">
  <div class="container header-inner">
    <a class="brand" href="{{ '/' | relative_url }}" aria-label="{{ site.title }}" title="返回首页">
      <span class="brand-logo" aria-hidden="true">
        <img src="{{ '/assets/img/logo.svg' | relative_url }}" alt="" width="26" height="26" loading="eager" decoding="sync" />
      </span>
      <span class="brand-name">{{ site.title }}</span>
    </a>
    <nav class="site-nav" aria-label="主导航">
      <div class="nav-primary">
        {% for item in nav_items limit:4 %}
          <a href="{{ item.url | relative_url }}">{{ item.title }}</a>
        {% endfor %}
      </div>
      {% if nav_items.size > 4 %}
      <div class="nav-secondary" aria-label="辅助入口">
        {% for item in nav_items offset:4 %}
          {% assign label = item.title | strip %}
          <a class="nav-icon" href="{{ item.url | relative_url }}" aria-label="{{ label }}" title="{{ label }}">
            {% case label %}
              {% when 'RSS' %}
                <svg viewBox="0 0 20 20" fill="none" aria-hidden="true">
                  <path fill="currentColor" d="M6.5 15.5a1.5 1.5 0 1 1-3 0a1.5 1.5 0 0 1 3 0Zm-1.25-4a5.75 5.75 0 0 1 5.75 5.75a1.25 1.25 0 0 1-2.5 0a3.25 3.25 0 0 0-3.25-3.25a1.25 1.25 0 0 1 0-2.5Zm0-4.5a10.25 10.25 0 0 1 10.25 10.25a1.25 1.25 0 0 1-2.5 0a7.75 7.75 0 0 0-7.75-7.75a1.25 1.25 0 1 1 0-2.5Z" />
                </svg>
              {% when '管理' %}
                <svg viewBox="0 0 20 20" fill="none" aria-hidden="true">
                  <path fill="currentColor" d="M17.5 8.75v2.5h-2.053a5.49 5.49 0 0 1-.594 1.439l1.455 1.455l-1.768 1.768l-1.455-1.455a5.49 5.49 0 0 1-1.439.594V17.5h-2.5v-2.053a5.49 5.49 0 0 1-1.439-.594L6.752 16.3L4.984 14.53l1.455-1.455a5.49 5.49 0 0 1-.594-1.439H3.75v-2.5h2.053a5.49 5.49 0 0 1 .594-1.439L4.942 5.856l1.768-1.768l1.455 1.455a5.49 5.49 0 0 1 1.439-.594V3.75h2.5v2.053a5.49 5.49 0 0 1 1.439.594l1.455-1.455l1.768 1.768l-1.455 1.455a5.49 5.49 0 0 1 .594 1.439H17.5Zm-7.5 2.125a1.875 1.875 0 1 0 0-3.75a1.875 1.875 0 0 0 0 3.75Z" />
                </svg>
              {% else %}
                <span class="nav-pill">{{ label }}</span>
            {% endcase %}
            <span class="sr-only">{{ label }}</span>
          </a>
        {% endfor %}
      </div>
      {% endif %}
    </nav>
    <div class="header-actions">
      {% if site.appearance.enable_theme_switcher %}
        {% include theme-toggle.html %}
      {% endif %}
      {% if features and features.search %}
        <button class="icon-button search-trigger" data-action="open-search" type="button" aria-label="搜索" title="搜索（/）">
          <svg viewBox="0 0 20 20" fill="none" aria-hidden="true">
            <path fill="currentColor" d="M12.9 14.32a6.5 6.5 0 1 1 1.414-1.414l3.387 3.387a1 1 0 0 1-1.414 1.414l-3.387-3.387ZM13 8.5a4.5 4.5 0 1 0-9 0a4.5 4.5 0 0 0 9 0Z" />
          </svg>
          <span class="sr-only">打开搜索</span>
        </button>
      {% endif %}
    </div>
  </div>
</header>